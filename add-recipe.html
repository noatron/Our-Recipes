<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הוספת מתכון - מפה לפה</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <header class="add-recipe-header">
            <a href="index.html" class="back-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m9 18 6-6-6-6"/>
                </svg>
                חזור
            </a>
            <h1>
                <span class="logo-wrap"><img src="logo.svg" alt="מפה לפה" class="logo"></span>
                הוספת מתכון חדש
            </h1>
        </header>

        <main>
            <div id="pending-approval-block" class="pending-approval-block" style="display: none;">
                <p class="pending-approval-title">בקשתך ממתינה לאישור</p>
                <p class="pending-approval-text">אחרי שאושרת תוכלי להוסיף מתכונים.</p>
                <a href="index.html" class="back-link">חזרה לדף הבית</a>
            </div>
            <div id="add-recipe-content" class="add-recipe-form">
                
                <!-- Mode Toggle Tabs -->
                <div class="mode-tabs">
                    <button type="button" class="tab-btn active" data-mode="import">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                        </svg>
                        <span>ייבוא מקישור</span>
                    </button>
                    <button type="button" class="tab-btn" data-mode="manual">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                        </svg>
                        <span>הזנה ידנית</span>
                    </button>
                    <button type="button" class="tab-btn" data-mode="images">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
                            <circle cx="9" cy="9" r="2"></circle>
                            <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
                        </svg>
                        <span>ייבוא מתמונות</span>
                    </button>
                    <button type="button" class="tab-btn" data-mode="csv">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <path d="M16 13H8"></path>
                            <path d="M16 17H8"></path>
                            <path d="M10 9H8"></path>
                        </svg>
                        <span>ייבוא מקובץ CSV</span>
                    </button>
                </div>
        
                <!-- Import Mode -->
                <div id="import-mode" class="mode-content active">
                    <div class="import-section">
                        <p class="mode-description">הדביקי קישור למתכון מאתר בישול, והמערכת תייבא אוטומטית את כל הפרטים</p>
                        
                        <div class="form-group">
                            <label for="recipeUrl">קישור למתכון</label>
                            <input type="url" id="recipeUrl" placeholder="https://www.10dakot.co.il/recipe/...">
                        </div>
                        
                        <button type="button" class="btn-primary" id="importBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            הוספת מתכון
                        </button>
                        
                        <div id="import-status" class="import-status"></div>
                        
                        <div class="import-info">
                            <p><strong>אתרים נתמכים:</strong></p>
                            <p class="supported-sites">שיפודון, 10 דקות, טעים מאוד, ועוד...</p>
                            <p class="fallback-note">אם הייבוא לא עובד, תמיד אפשר לעבור להזנה ידנית ↖️</p>
                        </div>
                    </div>
                </div>

                <!-- Multi-image import mode -->
                <div id="images-mode" class="mode-content">
                    <div class="import-section images-import-section">
                        <p class="mode-description images-mode-description">העלי תמונות של מתכון – ה-AI יחלץ מתכון מאוחד.</p>
                        <div class="form-group images-form-group">
                            <label for="recipeImageFiles" class="images-file-label">בחרי תמונות</label>
                            <input type="file" id="recipeImageFiles" class="images-file-input" accept="image/*" multiple>
                        </div>
                        <div id="images-preview" class="images-preview" style="display: none;"></div>
                        <button type="button" class="btn-primary images-extract-btn" id="extractFromImagesBtn" disabled>
                            חלצי מתכון
                        </button>
                        <div id="images-status" class="import-status"></div>
                    </div>
                </div>

                <!-- CSV Bulk Import Mode -->
                <div id="csv-mode" class="mode-content">
                    <div class="import-section">
                        <div class="form-group">
                            <label for="csvFile">בחרי קובץ CSV</label>
                            <input type="file" id="csvFile" accept=".csv,text/csv,text/plain">
                        </div>
                        <p class="mode-description or-divider">או הדביקי קישורים (שורה אחת לכל קישור):</p>
                        <div class="form-group">
                            <textarea id="csvPaste" rows="8" placeholder="https://www.example.com/recipe/1&#10;https://www.example.com/recipe/2&#10;..."></textarea>
                        </div>
                        <button type="button" class="btn-primary" id="csvImportBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            ייבא מהקובץ
                        </button>
                        <div id="csv-status" class="import-status csv-bulk-status"></div>
                    </div>
                </div>
        
                <!-- Manual Mode -->
                <div id="manual-mode" class="mode-content">
                    <form id="recipeForm">
                        
                        <p class="mode-description">מלאי את פרטי המתכון באופן ידני</p>
        
                        <!-- שם המתכון -->
                        <div class="form-group">
                            <label for="recipeName">שם המתכון *</label>
                            <input type="text" id="recipeName" required placeholder="לדוגמה: עוגת שוקולד של סבתא">
                        </div>
        
                        <!-- מקור -->
                        <div class="form-group">
                            <label for="recipeSource">מקור</label>
                            <input type="text" id="recipeSource" placeholder="לדוגמה: סבתא רחל">
                        </div>
        
                        <!-- URL לתמונה -->
                        <div class="form-group">
                            <label for="recipeImage">קישור לתמונה</label>
                            <input type="url" id="recipeImage" placeholder="https://example.com/image.jpg">
                        </div>
        
                        <!-- מרכיבים -->
                        <div class="form-group">
                            <label for="recipeIngredients">מרכיבים * <span class="hint">(כל שורה = מרכיב)</span></label>
                            <textarea id="recipeIngredients" required rows="6" placeholder="2 כוסות קמח&#10;3 ביצים&#10;כוס סוכר"></textarea>
                        </div>
        
                        <!-- הוראות הכנה -->
                        <div class="form-group">
                            <label for="recipeInstructions">הוראות הכנה * <span class="hint">(כל שורה = שלב)</span></label>
                            <textarea id="recipeInstructions" required rows="8" placeholder="מחממים תנור ל-180 מעלות&#10;מערבבים מרכיבים יבשים"></textarea>
                        </div>
        
                        <!-- כפתורים -->
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">שמור מתכון</button>
                            <button type="button" class="btn-secondary" onclick="window.location.href='index.html'">ביטול</button>
                        </div>
        
                    </form>
                </div>
        
            </div>
        </main>
    </div>

    <script type="module" src="add-recipe.js"></script>
</body>
</html>